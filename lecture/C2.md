# 02.变量、常量及表达式

[02.1 变量](#021-变量)

[02.2 表达式简介](#022-表达式简介)

[02.3 读取输入](#023-读取输入)

[02.4 常量](#024-常量)

[02.5 浮点数](#025-浮点数)

[02.6 表达式和运算符](#026-表达式和运算符)

[02.7 第二章练习](#027-第二章练习)

## 02.1 变量

上一章我们学习了简单的C语言程序框架，并且能让它进行简单的输出和计算。

现在，我们想写一个简单的找零程序，假设总量是100，然后收钱23，我们稍微修改printf如下即可

```c
printf("100-23=%d\n", 100 - 23);
```

<u>***演示***</u>得到了77的正确结果。

然而，我们希望程序能够在运行时通过用户输入金额来确定找零。比如说23这个数并不出现在程序中，而是由用户输入。这样我们不需要每次通过编辑程序代码（这种方式通常叫硬编码）来计算找零，这样可以使程序更加灵活多样性，不需要经常修改。

为了达到这个目的，我们需要做3件事情：

1. 有地⽅放输⼊的数字
2. 有办法输⼊数字
3. 输⼊的数字能参与计算

示例代码如下

```c
#include <stdio.h>

int main(void) {
    int price = 0;

    printf("请输入金额（元）：");
    scanf("%d", &price);

    int change = 100 - price;

    printf("找您%d元。\n", change);
    return 0;
}
```

这段代码相信大家已经尝试编译运行过了，我在这里再<u>***演示***</u>一次，输入23，按下回车，得到结果77。

为何需要按下回车这个操作，我们以后会再详细讲述。但是在日常使用软件的实践中我们经常都会用回车来代表这个动作或者事件已经完成了。

对于输入，我们暂时只需要知道

1. 输⼊也在终端窗⼝中
2. 输⼊是以⾏为单位进⾏的，⾏的结束标志就是你按下了回⻋键。在你按下回⻋之前，你的程序不会读到任何东⻄。

回到程序本身，我们输入的数值在哪呢？其实，它被储存在变量中，我们先看下面这一行

```c
int price = 0;
```

这⼀⾏的意思是：定义了⼀个变量。变量的名字是 price，类型是int，初始值是0。

类型我们会之后再阐释，我们先探究变量是什么？

变量是⼀个保存数据的地⽅，当我们需要在程序⾥保存数据时，⽐如上⾯的例⼦中要记录⽤户输⼊的价格，就需要⼀个变量来保存它。⽤⼀个变量保存了数据，它才能参加到后⾯的计算中，⽐如计算找零。

### 变量定义

一般形式：*类型名称* *变量名称*;

比如说：

```c
int price;
int amount;
int checkin, checkout;
```

对于程序而言，定义变量也算是一种操作，因此要以;结尾。在最后一个例子中我们发现，定义多个相同类型的变量时，我们可以使用,分隔不同的变量减少重复输入类型名称。

#### 变量名称

1. 变量需要⼀个名字，变量的名字是⼀种 “标识符”，意思是它是⽤来识别这个和那个的不同的名字。（可以类比理解为人的身份证号，只是用其他形式表达）
2. 标识符有标识符的构造规则。基本的原则是：标识符只能由字⺟、数字和下划线组成，数字不可以出现在第⼀个位置上，C 语⾔的关键字（有的地⽅叫它们保留字）不可以⽤做标识符。

下面是一些常见的例子

:heavy_check_mark:int haha;

:heavy_check_mark:int haha1;

:heavy_check_mark:int digit1;

:heavy_check_mark:int _happy;

:x:int 1digit;

:x:int comm!a;

***注意：有的编译器允许使用中文作为变量名，但请在实践中不要这么做。这是我们后面会了解到的未定义行为（Undefined Behavior，俗称UB），我们无法保证或者期待这种行为会得到广泛的支持。***

##### C语言保留字 

下面是一些C语言的保留字和参考链接，我们并不需要背诵，在后面的学习中我们会接触到其中的大部分（编译器也大多会提示或者报错）。我们只需要知道不要用保留字拿来作变量的标识符即可。

[C key word](https://en.cppreference.com/w/c/keyword)

![c_keyword](./C2/c_keyword.png)

##### *好的变量命名规范

1. 自说明
2. 不要使用汉语拼音
3. 不要使用迷之简写
4. 不要使用无意义命名
5. 不要使用可能带有歧义的名字

参考自[大胖逼逼叨15-程序员改掉这些陋习 轻松涨薪5000元](https://www.bilibili.com/video/av85133385)

#### 变量类型

对于

```c
int price = 0;
```

我们来研究一下这个int。C语言是⼀种有类型的语⾔，所有的变量在使⽤之前必须定义或声明，所有的变量必须具有确定的数据类型。数据类型表⽰在变量中可以存放什么样的数据，变量中只能存放指定类型的数据，程序运⾏过程中也不能改变变量的类型。

price是第一个变量，第二个变量是change，并且用来保存计算的结果。

一个程序中可以存在多个变量，当我们有需要时就可以定义一个新的变量。

注意，change是在程序中间定义的，这是C99标准所新增的。C89（ANSI C）是不支持进行这种操作的，必须定义在程序的开头。

在C89中，一旦开始进行操作比如输入、输出或者计算的时候就不允许定义新的变量了。本课使用教材就参照了C89标准，但是同学们使用C99标准即可。C标准是向前兼容的，因此有偏爱C89标准的同学也可以按照C89标准进行C程序编写。


### 变量赋值和初始化

我们回到这一行

```c
int price = 0;
```

这里price = 0的意思和数学上的等于并不一样，在C语言中它表达的是赋值的意思：即把0这个值赋予给price这个变量。

通用的来讲，这⾥的“＝”是⼀个赋值运算符，表⽰将“＝”右边的值赋给左边的变量。

因为我们在定义price这个变量的时候也将其赋值，这种行为我们称之为初始化。在C语言中赋值和初始化的差别并不大，但在一些其他语言例如C++会有所区别。

### 赋值

和数学不同，a=b在数学中表⽰关系，即a和b的值⼀样；⽽在程序设计中，a=b表⽰ 要求计算机做⼀个动作：将b的值赋给a。 关系是静态的，⽽动作是动态的。在数学中，a=b和b=a是等价的，⽽在程序设计中，两者的意思完全相反。

### 初始化

当赋值发⽣在定义变量的时候，就是变量的初始化。虽然C语⾔并没有强制要求所有的变量都在定义的地⽅做初始化（但我一般推荐进行初始化），但是所有的变量在第⼀次被使⽤（出现在赋值运算符的右边）之前应该赋值⼀次。

#### 假如不初始化？

有的同学可能想知道如果变量不初始化就拿来使用会有什么后果，在多平台<u>***演示***</u>，不确定行为。

初始化后再在多平台<u>***演示***</u>，结果正常。

那么这是为什么呢，因为变量是储存在内存（即1.1中的RAM）中的，如果不进行初始化，那么默认就是变量所在的地方里的原来的值。如果大家在自己的电脑上运行，可能会有不同的结果。因为这取决于原来那个地方的值，那个值***对我们的程序而言***是未定义的。因此，不进行初始化就使用的行为也属于上面所提到的未定义行为UB的一种。

举个例子，大家在搬进新宿舍的时候没有进行打扫清洁，那么里面所有的垃圾（对应的就是那些奇怪的数）都是自己的了。

#### 变量初始化

*类型名称* *变量名称* = *初始值*;

例如

```c
int price = 0;
int amount = 100;
```

定义多个变量的时候，也可以在这个定义中单独给单个变量赋初值，如：

```c
int price = 0, amount = 100;
```

注意变量名称依然遵守命名规则，并无例外。

## 02.2 表达式简介

还是这一行

```c
int price = 0;
```

“＝”是赋值运算符（先不需要理解运算符的意思，知道是个符号即可），有运算符的式⼦就叫做表达式。

```c
price = 0;
change = 100 - price;
```

这些都属于表达式。

## 02.3 读取输入

定义了price变量后，我们是如何将用户的输入放入到price中的呢？参考下面这一行

```c
scanf("%d", &price);
```

我们需要用到scanf函数，printf其实也是一个函数，我们程序框架里的main也是一个函数。然而同学们暂时还不需要明白函数的概念，我们暂时只需要知道printf是用于输出的函数，scanf是用于输入的函数即可。

scanf、printf这两个函数最后的字母f代表formatted，即格式化的，像之前用到的%d之类的都属于一种格式，叫格式字符串。

总而言之，我们要求scnaf这个函数读⼊⼀个整数，把读到的结果赋值给变量price。记住price前有一个&符号，我们暂时不需要知道&的作用和意义（在后面的指针中会学习到），只需要知道必须加在变量名前才能正确获取数据即可。否则无法正确读取输入，甚至会导致程序崩溃。

### 如果没有按照格式输入？

进行<u>***演示***</u>

在后面具体的输入和输出讲解中，我们会讲解如何知道用户输入的具体是什么值。

## 02.4 常量

## 02.5 浮点数

## 02.6 表达式和运算符

## 02.7 第二章练习

